{
  "last_node_id": 100,
  "last_link_id": 100,
  "nodes": [
    {
      "id": 100,
      "type": "Note",
      "pos": [-900, -300],
      "size": [400, 400],
      "flags": {},
      "widgets_values": [
        "ADVANCED HEIGHTMAP WORKFLOW\n\n1. Reference Image: Load a landscape photo.\n2. Ollama Analysis: Describes the terrain features.\n3. Prompt Gen: Converts description into a Heightmap Prompt.\n4. Generation: Creates a precise top-down depth map.\n\nREQUIREMENTS:\n- Ollama running locally (llava model).\n- A Checkpoint good at depth/heightmaps.\n- (Optional) A Heightmap LoRA connected to the LoRA Loader."
      ]
    },
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [-900, 150],
      "size": [315, 314],
      "flags": {},
      "widgets_values": ["landscape.png", "image"]
    },
    {
      "id": 2,
      "type": "OllamaVision",
      "pos": [-500, 150],
      "size": [400, 200],
      "flags": {},
      "inputs": [
        { "name": "images", "type": "IMAGE", "link": 1 }
      ],
      "outputs": [
        { "name": "STRING", "type": "STRING", "links": [2] }
      ],
      "widgets_values": [
        "Describe the landscape geography, mountains, valleys, and terrain features. Do not describe colors or sky.", 
        "http://127.0.0.1:11434", 
        "llava", 
        0.2, 
        0, 
        "Top down aerial 3D heightmap depth map, greyscale, highly detailed 16-bit, ", 
        ", smooth gradients, no noise, white is high, black is low."
      ]
    },
    {
      "id": 3,
      "type": "CheckpointLoaderSimple",
      "pos": [-500, -100],
      "size": [315, 98],
      "flags": {},
      "outputs": [
        { "name": "MODEL", "type": "MODEL", "links": [3] },
        { "name": "CLIP", "type": "CLIP", "links": [4] },
        { "name": "VAE", "type": "VAE", "links": [5] }
      ],
      "widgets_values": ["v1-5-pruned-emaonly.ckpt"]
    },
    {
      "id": 4,
      "type": "LoraLoader",
      "pos": [-150, -100],
      "size": [315, 126],
      "flags": {},
      "inputs": [
        { "name": "model", "type": "MODEL", "link": 3 },
        { "name": "clip", "type": "CLIP", "link": 4 }
      ],
      "outputs": [
        { "name": "MODEL", "type": "MODEL", "links": [6] },
        { "name": "CLIP", "type": "CLIP", "links": [7] }
      ],
      "widgets_values": ["HeightMap_LoRA.safetensors", 1.0, 1.0]
    },
    {
      "id": 5,
      "type": "CLIPTextEncode",
      "pos": [200, 50],
      "size": [400, 200],
      "flags": {},
      "title": "Generated Heightmap Prompt",
      "inputs": [
        { "name": "clip", "type": "CLIP", "link": 7 },
        { "name": "text", "type": "STRING", "link": 2, "widget": {"name": "text"} }
      ],
      "outputs": [
        { "name": "CONDITIONING", "type": "CONDITIONING", "links": [8] }
      ],
      "widgets_values": [""]
    },
    {
      "id": 6,
      "type": "CLIPTextEncode",
      "pos": [200, 300],
      "size": [400, 100],
      "flags": {},
      "title": "Negative Prompt",
      "inputs": [
        { "name": "clip", "type": "CLIP", "link": 7 }
      ],
      "outputs": [
        { "name": "CONDITIONING", "type": "CONDITIONING", "links": [9] }
      ],
      "widgets_values": ["color, texture, rock texture, grass texture, noise, dither, distortion, sky, clouds, water, buildings"]
    },
    {
      "id": 7,
      "type": "EmptyLatentImage",
      "pos": [200, -150],
      "size": [315, 106],
      "flags": {},
      "outputs": [
        { "name": "LATENT", "type": "LATENT", "links": [10] }
      ],
      "widgets_values": [1024, 1024, 1]
    },
    {
      "id": 8,
      "type": "KSampler",
      "pos": [650, 0],
      "size": [315, 262],
      "flags": {},
      "inputs": [
        { "name": "model", "type": "MODEL", "link": 6 },
        { "name": "positive", "type": "CONDITIONING", "link": 8 },
        { "name": "negative", "type": "CONDITIONING", "link": 9 },
        { "name": "latent_image", "type": "LATENT", "link": 10 }
      ],
      "outputs": [
        { "name": "LATENT", "type": "LATENT", "links": [11] }
      ],
      "widgets_values": [12345, "fixed", 30, 8.0, "euler_ancestral", "normal", 1]
    },
    {
      "id": 9,
      "type": "VAEDecode",
      "pos": [1000, 0],
      "size": [210, 46],
      "flags": {},
      "inputs": [
        { "name": "samples", "type": "LATENT", "link": 11 },
        { "name": "vae", "type": "VAE", "link": 5 }
      ],
      "outputs": [
        { "name": "IMAGE", "type": "IMAGE", "links": [12] }
      ],
      "widgets_values": []
    },
    {
      "id": 10,
      "type": "PreviewHeightmapInBlender",
      "pos": [1250, 0],
      "size": [400, 300],
      "flags": {},
      "inputs": [
        { "name": "images", "type": "IMAGE", "link": 12 },
        { "name": "texture", "type": "IMAGE", "link": null }
      ],
      "outputs": [
          { "name": "heightmap", "type": "IMAGE", "links": [] }
      ],
      "widgets_values": [
        true,
        false, 
        true,  
        1.0,   
        1.0,   
        "127.0.0.1",
        8119,
        0.1,  
        "0"
      ]
    }
  ],
  "links": [
    [1, 1, 0, 2, 0, "IMAGE"],
    [2, 2, 0, 5, 1, "STRING"],
    [3, 3, 0, 4, 0, "MODEL"],
    [4, 3, 1, 4, 1, "CLIP"],
    [5, 3, 2, 9, 1, "VAE"],
    [6, 4, 0, 8, 0, "MODEL"],
    [7, 4, 1, 5, 0, "CLIP"],
    [8, 5, 0, 8, 1, "CONDITIONING"],
    [9, 6, 0, 8, 2, "CONDITIONING"],
    [10, 7, 0, 8, 3, "LATENT"],
    [11, 8, 0, 9, 0, "LATENT"],
    [12, 9, 0, 10, 0, "IMAGE"]
  ],
  "groups": [],
  "config": {},
  "extra": {},
  "version": 0.4
}