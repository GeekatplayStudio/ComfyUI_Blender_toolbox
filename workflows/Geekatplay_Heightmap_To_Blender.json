{
  "id": "75969c46-bbb1-49f9-ada4-13740aae72ff",
  "revision": 0,
  "last_node_id": 126,
  "last_link_id": 156,
  "nodes": [
    {
      "id": 100,
      "type": "Note",
      "pos": [
        -1074.083760028585,
        -369.8017008810267
      ],
      "size": [
        400,
        400
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "ADVANCED HEIGHTMAP WORKFLOW\n\n1. Reference Image: Load a landscape photo.\n2. Ollama Analysis: Describes the terrain features.\n3. Prompt Gen: Converts description into a Heightmap Prompt.\n4. Generation: Creates a precise top-down depth map.\n\nREQUIREMENTS:\n- Ollama running locally (llava model).\n- A Checkpoint good at depth/heightmaps.\n- (Optional) A Heightmap LoRA connected to the LoRA Loader."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 102,
      "type": "PreviewAny",
      "pos": [
        193.24668196762022,
        447.40919699633076
      ],
      "size": [
        408.7781186097145,
        133.12515730685493
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "source",
          "type": "*",
          "link": 102
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "PreviewAny"
      },
      "widgets_values": [
        null,
        null,
        null
      ]
    },
    {
      "id": 110,
      "type": "PreviewImage",
      "pos": [
        2475.7979721294396,
        535.68162815203
      ],
      "size": [
        140,
        246.00000000000003
      ],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 110
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 111,
      "type": "PreviewImage",
      "pos": [
        2481.9205559883944,
        848.6552846237906
      ],
      "size": [
        140,
        246.00000000000006
      ],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 111
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 112,
      "type": "PreviewImage",
      "pos": [
        2489.9653563331312,
        1178.823303353141
      ],
      "size": [
        140,
        246
      ],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 112
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 104,
      "type": "CLIPTextEncode",
      "pos": [
        546.1740230767649,
        778.4045805474299
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 124
        },
        {
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": 103
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            105
          ]
        }
      ],
      "title": "Positive Prompt",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "360 degree equirectangular panorama, hdri sky, sunny day, clouds, high resolution, golden hour"
      ]
    },
    {
      "id": 105,
      "type": "CLIPTextEncode",
      "pos": [
        537.1361275507254,
        1030.9023767416943
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 123
        },
        {
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": 104
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            106
          ]
        }
      ],
      "title": "Negative Prompt",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "seams, distortion, blur, low quality, text, watermark, blur"
      ]
    },
    {
      "id": 101,
      "type": "PreviewImage",
      "pos": [
        2742.6127610638055,
        -9.636664071072023
      ],
      "size": [
        404.57367586953046,
        336.8278150075603
      ],
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 101
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 113,
      "type": "OllamaVision",
      "pos": [
        -865.8755504507873,
        548.387882784695
      ],
      "size": [
        400,
        316
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 113
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            114,
            125
          ]
        }
      ],
      "properties": {
        "aux_id": "GeekatplayStudio/comfyui_360_hdri",
        "ver": "98a5d0c7fabf6c436187017ef5f1b6fbcf5ea47b",
        "Node name for S&R": "OllamaVision"
      },
      "widgets_values": [
        "Describe the landscape texture.",
        "http://127.0.0.1:11434",
        "llava",
        0.2,
        "Top down, color texture",
        "Top down aerial texture map, highly detailed 16-bit, ",
        871491504162450,
        "randomize"
      ]
    },
    {
      "id": 103,
      "type": "TerrainTexturePromptMaker",
      "pos": [
        -289.5918458519608,
        684.9055820667892
      ],
      "size": [
        356.589453125,
        102
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "description",
          "type": "STRING",
          "link": 115
        },
        {
          "name": "heightmap_description",
          "shape": 7,
          "type": "STRING",
          "link": 114
        }
      ],
      "outputs": [
        {
          "name": "positive_prompt",
          "type": "STRING",
          "links": [
            103
          ]
        },
        {
          "name": "negative_prompt",
          "type": "STRING",
          "links": [
            104
          ]
        }
      ],
      "properties": {
        "aux_id": "GeekatplayStudio/comfyui_360_hdri",
        "ver": "b81ee9faae007993974cc7a9b49c4867889dfa37",
        "Node name for S&R": "TerrainTexturePromptMaker"
      },
      "widgets_values": [
        "General",
        "Side View / Photo"
      ]
    },
    {
      "id": 2,
      "type": "OllamaVision",
      "pos": [
        -861.8008331554884,
        135.7882932014203
      ],
      "size": [
        400,
        316
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            102,
            115
          ]
        }
      ],
      "properties": {
        "aux_id": "GeekatplayStudio/comfyui_360_hdri",
        "ver": "98a5d0c7fabf6c436187017ef5f1b6fbcf5ea47b",
        "Node name for S&R": "OllamaVision"
      },
      "widgets_values": [
        "Describe the landscape geography, mountains, valleys, and terrain features. Do not describe colors or sky.",
        "http://127.0.0.1:11434",
        "llava",
        0.2,
        "Top down, DEM style image. Heigh need to be white, lower need to be black. top view, map view",
        "Top down aerial 3D heightmap depth map, greyscale, highly detailed 16-bit, ",
        671771707759647,
        "randomize"
      ]
    },
    {
      "id": 109,
      "type": "SimplePBRGenerator",
      "pos": [
        1882.1320173161566,
        787.5575515767435
      ],
      "size": [
        277.73046875,
        122
      ],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 109
        }
      ],
      "outputs": [
        {
          "name": "roughness",
          "type": "IMAGE",
          "links": [
            110,
            131
          ]
        },
        {
          "name": "metallic",
          "type": "IMAGE",
          "links": [
            111,
            137
          ]
        },
        {
          "name": "normal",
          "type": "IMAGE",
          "links": [
            112,
            122
          ]
        }
      ],
      "properties": {
        "aux_id": "GeekatplayStudio/comfyui_360_hdri",
        "ver": "0239bee25faf9c056b43681140253d21bc5b7b57",
        "Node name for S&R": "SimplePBRGenerator"
      },
      "widgets_values": [
        1,
        1
      ]
    },
    {
      "id": 10,
      "type": "PreviewHeightmapInBlender",
      "pos": [
        2238.8400734735565,
        -13.597595874444945
      ],
      "size": [
        400,
        378
      ],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 145
        },
        {
          "name": "texture",
          "shape": 7,
          "type": "IMAGE",
          "link": 129
        },
        {
          "name": "roughness_map",
          "shape": 7,
          "type": "IMAGE",
          "link": 131
        },
        {
          "name": "normal_map",
          "shape": 7,
          "type": "IMAGE",
          "link": 122
        },
        {
          "name": "metallic_map",
          "shape": 7,
          "type": "IMAGE",
          "link": 137
        }
      ],
      "outputs": [
        {
          "name": "heightmap",
          "type": "IMAGE",
          "links": [
            101
          ]
        }
      ],
      "properties": {
        "aux_id": "GeekatplayStudio/comfyui_360_hdri",
        "ver": "98a5d0c7fabf6c436187017ef5f1b6fbcf5ea47b",
        "Node name for S&R": "PreviewHeightmapInBlender"
      },
      "widgets_values": [
        true,
        true,
        true,
        0.5,
        8,
        "127.0.0.1",
        8119,
        0.1,
        "0",
        0.1,
        0.9
      ]
    },
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [
        -1339.9046156861416,
        174.62570367708682
      ],
      "size": [
        315,
        314
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1,
            113
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "magnifics_upscale-1A9G5YPmRaXEuikjKNOb-Firefly_make it wide screen, add transitions on sides to diffirent type of landscapes, desert 645487.png",
        "image"
      ]
    },
    {
      "id": 116,
      "type": "PreviewAny",
      "pos": [
        -323.58267317998207,
        861.9994637094809
      ],
      "size": [
        408.7781186097145,
        133.12515730685493
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "source",
          "type": "*",
          "link": 125
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "PreviewAny"
      },
      "widgets_values": [
        null,
        null,
        null
      ]
    },
    {
      "id": 107,
      "type": "VAEDecode",
      "pos": [
        1479.0293259216842,
        718.9418374470056
      ],
      "size": [
        210,
        46
      ],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 107
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 116
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            108,
            109,
            129,
            144
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "VAEDecode"
      },
      "widgets_values": []
    },
    {
      "id": 3,
      "type": "CheckpointLoaderSimple",
      "pos": [
        -455.645758330595,
        -37.5679171495153
      ],
      "size": [
        315,
        98
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            3
          ]
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            4
          ]
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            116,
            148
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": [
        "sdxl\\juggernautXL_v7Rundiffusion.safetensors"
      ]
    },
    {
      "id": 122,
      "type": "ColorToHeightmap",
      "pos": [
        1625.7301080191112,
        405.4077702330927
      ],
      "size": [
        308.56015625,
        106
      ],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 144
        }
      ],
      "outputs": [
        {
          "name": "heightmap",
          "type": "IMAGE",
          "links": [
            145
          ]
        }
      ],
      "properties": {
        "aux_id": "GeekatplayStudio/comfyui_360_hdri",
        "ver": "3a696765600b1eef53e5f2093a3e2f6e06feb96b",
        "Node name for S&R": "ColorToHeightmap"
      },
      "widgets_values": [
        false,
        true,
        1
      ]
    },
    {
      "id": 108,
      "type": "PreviewImage",
      "pos": [
        1562.1511288604015,
        1067.5507089112855
      ],
      "size": [
        648,
        474
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 108
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 106,
      "type": "KSampler",
      "pos": [
        1102.3347184279937,
        887.0363786267111
      ],
      "size": [
        315,
        262
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 120
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 105
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 106
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 156
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            107
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        123456789,
        "fixed",
        25,
        7,
        "euler",
        "normal",
        1
      ]
    },
    {
      "id": 7,
      "type": "EmptyLatentImage",
      "pos": [
        999.1688532817315,
        318.9924937251322
      ],
      "size": [
        315,
        106
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            156
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "EmptyLatentImage"
      },
      "widgets_values": [
        1024,
        1024,
        1
      ]
    },
    {
      "id": 124,
      "type": "LoadImage",
      "pos": [
        -127.32110145659739,
        -457.7290044616056
      ],
      "size": [
        282.798828125,
        314
      ],
      "flags": {},
      "order": 4,
      "mode": 4,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            154
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "Gemini_Generated_Image_5qz3bc5qz3bc5qz3.png",
        "image"
      ]
    },
    {
      "id": 123,
      "type": "ImageTo360Latent",
      "pos": [
        361.9594989872155,
        -200.73682545279473
      ],
      "size": [
        354.538671875,
        198
      ],
      "flags": {},
      "order": 8,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 154
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 148
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": []
        }
      ],
      "properties": {
        "aux_id": "GeekatplayStudio/comfyui_360_hdri",
        "ver": "3a696765600b1eef53e5f2093a3e2f6e06feb96b",
        "Node name for S&R": "ImageTo360Latent"
      },
      "widgets_values": [
        1024,
        1024,
        "center",
        0.5,
        682902856595928,
        "randomize"
      ]
    },
    {
      "id": 4,
      "type": "LoraLoader",
      "pos": [
        80.12557251659548,
        168.6290729765706
      ],
      "size": [
        315,
        126
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 3
        },
        {
          "name": "clip",
          "type": "CLIP",
          "link": 4
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            120
          ]
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            123,
            124
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.7.0",
        "Node name for S&R": "LoraLoader"
      },
      "widgets_values": [
        "seamless_texture.safetensors",
        1,
        0
      ]
    }
  ],
  "links": [
    [
      1,
      1,
      0,
      2,
      0,
      "IMAGE"
    ],
    [
      3,
      3,
      0,
      4,
      0,
      "MODEL"
    ],
    [
      4,
      3,
      1,
      4,
      1,
      "CLIP"
    ],
    [
      101,
      10,
      0,
      101,
      0,
      "IMAGE"
    ],
    [
      102,
      2,
      0,
      102,
      0,
      "STRING"
    ],
    [
      103,
      103,
      0,
      104,
      1,
      "STRING"
    ],
    [
      104,
      103,
      1,
      105,
      1,
      "STRING"
    ],
    [
      105,
      104,
      0,
      106,
      1,
      "CONDITIONING"
    ],
    [
      106,
      105,
      0,
      106,
      2,
      "CONDITIONING"
    ],
    [
      107,
      106,
      0,
      107,
      0,
      "LATENT"
    ],
    [
      108,
      107,
      0,
      108,
      0,
      "IMAGE"
    ],
    [
      109,
      107,
      0,
      109,
      0,
      "IMAGE"
    ],
    [
      110,
      109,
      0,
      110,
      0,
      "IMAGE"
    ],
    [
      111,
      109,
      1,
      111,
      0,
      "IMAGE"
    ],
    [
      112,
      109,
      2,
      112,
      0,
      "IMAGE"
    ],
    [
      113,
      1,
      0,
      113,
      0,
      "IMAGE"
    ],
    [
      114,
      113,
      0,
      103,
      1,
      "STRING"
    ],
    [
      115,
      2,
      0,
      103,
      0,
      "STRING"
    ],
    [
      116,
      3,
      2,
      107,
      1,
      "VAE"
    ],
    [
      120,
      4,
      0,
      106,
      0,
      "MODEL"
    ],
    [
      122,
      109,
      2,
      10,
      3,
      "IMAGE"
    ],
    [
      123,
      4,
      1,
      105,
      0,
      "CLIP"
    ],
    [
      124,
      4,
      1,
      104,
      0,
      "CLIP"
    ],
    [
      125,
      113,
      0,
      116,
      0,
      "STRING"
    ],
    [
      129,
      107,
      0,
      10,
      1,
      "IMAGE"
    ],
    [
      131,
      109,
      0,
      10,
      2,
      "IMAGE"
    ],
    [
      137,
      109,
      1,
      10,
      4,
      "IMAGE"
    ],
    [
      144,
      107,
      0,
      122,
      0,
      "IMAGE"
    ],
    [
      145,
      122,
      0,
      10,
      0,
      "IMAGE"
    ],
    [
      148,
      3,
      2,
      123,
      1,
      "VAE"
    ],
    [
      154,
      124,
      0,
      123,
      0,
      "IMAGE"
    ],
    [
      156,
      7,
      0,
      106,
      3,
      "LATENT"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.43056764313424634,
      "offset": [
        1990.254894973923,
        1394.5056766103537
      ]
    },
    "workflowRendererVersion": "LG",
    "frontendVersion": "1.35.9"
  },
  "version": 0.4
}